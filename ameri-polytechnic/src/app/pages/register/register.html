<div class="register-page">
  <header class="hero-section">
    <div class="container">
      <div class="hero-content">
        <div class="hero-text">
          <h1>Create Account</h1>
          <p class="hero-description">Join American Polytechnic and start your journey today</p>
        </div>
      </div>
    </div>
  </header>

  <div class="container page-content">
    <div class="register-container">
      <div class="register-card">
        <h2>Get Started</h2>
        <p class="register-subtitle">Create your account to access all our resources</p>
        
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
          @if (error()) {
            <div class="alert alert-error">
              {{ error() }}
            </div>
          }
          
          @if (success()) {
            <div class="alert alert-success">
              <p><strong>Registration successful!</strong></p>
              @if (verificationUrl()) {
                <p style="margin-top: 10px;">For local testing, use this verification link:</p>
                <div style="margin-top: 10px; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 4px; word-break: break-all;">
                  <a [href]="verificationUrl()!" target="_blank" style="color: #fff; text-decoration: underline;">
                    {{ verificationUrl() }}
                  </a>
                </div>
                <p style="margin-top: 10px; font-size: 0.9em;">Click the link above to verify your email, or check your browser console/network tab for the API response.</p>
              } @else {
                <p>Please check your email to verify your account.</p>
                <p style="margin-top: 10px;">Redirecting to login...</p>
              }
            </div>
          }
          
          <div class="form-row">
            <div class="form-group">
              <label for="first_name">First Name</label>
              <input 
                type="text" 
                id="first_name" 
                formControlName="first_name" 
                placeholder="Enter your first name"
                [class.error]="registerForm.get('first_name')?.touched && registerForm.get('first_name')?.invalid">
              @if (getFieldError('first_name')) {
                <span class="error-message">{{ getFieldError('first_name') }}</span>
              }
            </div>
            
            <div class="form-group">
              <label for="last_name">Last Name</label>
              <input 
                type="text" 
                id="last_name" 
                formControlName="last_name" 
                placeholder="Enter your last name"
                [class.error]="registerForm.get('last_name')?.touched && registerForm.get('last_name')?.invalid">
              @if (getFieldError('last_name')) {
                <span class="error-message">{{ getFieldError('last_name') }}</span>
              }
            </div>
          </div>
          
          <div class="form-group">
            <label for="email">Email Address</label>
            <input 
              type="email" 
              id="email" 
              formControlName="email" 
              placeholder="Enter your email"
              [class.error]="registerForm.get('email')?.touched && registerForm.get('email')?.invalid">
            @if (getFieldError('email')) {
              <span class="error-message">{{ getFieldError('email') }}</span>
            }
          </div>
          
          <div class="form-group">
            <label for="phone">Phone Number <span class="optional">(Optional)</span></label>
            <input 
              type="tel" 
              id="phone" 
              formControlName="phone" 
              placeholder="Enter your phone number">
          </div>
          
          <div class="form-group">
            <label for="password">Password</label>
            <input 
              type="password" 
              id="password" 
              formControlName="password" 
              placeholder="Create a password (min 8 characters)"
              [class.error]="registerForm.get('password')?.touched && registerForm.get('password')?.invalid">
            @if (getFieldError('password')) {
              <span class="error-message">{{ getFieldError('password') }}</span>
            }
          </div>
          
          <div class="form-group">
            <label for="password_confirmation">Confirm Password</label>
            <input 
              type="password" 
              id="password_confirmation" 
              formControlName="password_confirmation" 
              placeholder="Confirm your password"
              [class.error]="registerForm.get('password_confirmation')?.touched && registerForm.get('password_confirmation')?.invalid">
            @if (getFieldError('password_confirmation')) {
              <span class="error-message">{{ getFieldError('password_confirmation') }}</span>
            }
          </div>
          
          <div class="form-options">
            <label class="checkbox-label">
              <input type="checkbox" formControlName="agree_terms">
              <span>I agree to the <a href="#">Terms and Conditions</a></span>
            </label>
            @if (registerForm.get('agree_terms')?.touched && registerForm.get('agree_terms')?.invalid) {
              <span class="error-message">You must agree to the terms and conditions</span>
            }
          </div>
          
          <button 
            type="submit" 
            class="btn btn-primary btn-block"
            [disabled]="loading()">
            @if (loading()) {
              Creating Account...
            } @else {
              Create Account
            }
          </button>
        </form>
        
        <div class="register-footer">
          <p>Already have an account? <a routerLink="/login">Login here</a></p>
        </div>
      </div>
    </div>
  </div>
</div>

